# FlutterKaigi 2025 R2 Public Bucket Management

Cloudflare R2 バケットを直接利用した公開ファイル管理システムです。

## 🎯 概要

このシステムは以下の機能を提供します：

**企業ロゴ専用機能:**

- **企業ロゴの一括アップロード**: 複数の企業ロゴファイルを一度に Cloudflare R2 バケットにアップロード（ステージング・本番環境対応）
- **企業ロゴギャラリー表示**: アップロードされた企業ロゴをブラウザで確認・管理（本番・ステージング環境のタブ切り替え対応）

**共通機能:**

- **ログ管理**: さまざまなログを出力（アップロードの履歴・エラーなど）

**将来的な拡張予定:**

- 他に必要なものがあれば随時追加で実装予定

## 🏗️ システム構成

```
bff/public-buckets/
├── company-logos/                 # 企業ロゴ関連ファイル
│   ├── logos/                     # 企業ロゴ画像ファイル（24個の WebP ファイル）
│   ├── company-logos-gallery.html # 企業ロゴギャラリー（本番・ステージング対応）
│   └── upload-company-logos.sh    # 企業ロゴの一括アップロードスクリプト
├── logs/                          # ログファイル置き場
│   └── .gitignore                 # ログファイルの Git 除外設定
├── RCLONE_SETUP.md                # Rclone 設定手順書
└── README.md                      # このファイル
```

## 🚀 セットアップ

### 前提条件

- **Rclone**: インストール済み（`mise` で管理）
- **Cloudflare R2**: アカウント情報とアクセスキー

詳細なセットアップ手順は `RCLONE_SETUP.md` を参照してください。

## 📁 使用方法

### 企業ロゴの一括アップロード

```bash
# プロジェクトルートから実行
./bff/public-buckets/company-logos/upload-company-logos.sh

# または、スクリプトディレクトリから実行
cd bff/public-buckets/company-logos
./upload-company-logos.sh
```

**特徴:**

- 🔧 **バケット選択機能**: ステージング・本番環境を選択可能
- 🔍 **自動ファイル検出**: `company-logos/logos` ディレクトリ配下の全ファイルを自動検出・アップロード
- 📈 **リアルタイム進捗**: アップロード状況をリアルタイムで表示
- 🎨 **色付き出力**: 見やすい色付きのコンソール表示
- 📝 **詳細ログ**: タイムスタンプ付きの詳細ログファイルを生成
- ⚡ **エラーハンドリング**: 前提条件チェックとエラー処理
- 🖼️ **ファイル形式対応**: WebP, PNG, JPG, JPEG をサポート
- 🚀 **高速転送**: Rclone による最適化されたアップロード
- 📊 **統計情報**: ファイル数、所要時間、成功率を表示

### 企業ロゴのギャラリー表示

```bash
# HTML ファイルをブラウザで開く
open company-logos/company-logos-gallery.html
# または
# ブラウザで直接ファイルを開く
```

**特徴:**

- 🖼️ **ファイル表示**: `company-logos/logos` ディレクトリ配下の全ファイルを美しく表示
- 📱 **レスポンシブ**: モバイル・デスクトップ両対応のデザイン
- 📊 **統計表示**: 総ファイル数、読み込み済み、エラー数を表示
- 🎯 **エラー処理**: エラーハンドリングと成功メッセージ
- 🔄 **動的読み込み**: R2 バケットからリアルタイムでファイルを取得
- 🗂️ **環境切り替え**: 本番・ステージング環境をタブで簡単に切り替え
- 🎨 **美しい UI**: グラデーション背景、カードレイアウト、ホバーエフェクト

## 📝 ログ管理

### ログファイル

- **場所**: `logs/` ディレクトリ
- **形式**: `upload-company-logos-YYYYMMDD-HHMMSS.log`
- **内容**: アップロード詳細、エラー情報、統計データ
- **保持**: Git から除外（機密情報保護）

### ログの内容例

```log
=============================================================================
FlutterKaigi 2025 ファイル一括アップロードログ
=============================================================================
開始時刻: 2025-08-23 17:30:00
プロジェクトルート: /path/to/project
選択されたバケット: 2025-public-staging
ソースディレクトリ: /path/to/companies
Rclone リモート: r2
=============================================================================
```
