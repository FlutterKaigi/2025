# FlutterKaigi 2025 R2 Public Bucket Management

Cloudflare R2 バケットを直接利用した公開ファイル管理システムです。

## 🎯 概要

このシステムは以下の機能を提供します：

**企業ロゴ専用機能:**

- **企業ロゴの一括アップロード**: 複数の企業ロゴファイルを一度に Cloudflare R2 バケットにアップロード（ステージング・本番環境対応）
- **企業ロゴギャラリー表示**: アップロードされた企業ロゴをブラウザで確認・管理（本番・ステージング環境のタブ切り替え対応）

**共通機能:**

- **ログ管理**: さまざまなログを出力（アップロードの履歴・エラーなど）

**将来的な拡張予定:**

- 他に必要なものがあれば随時追加で実装予定

## 🏗️ システム構成

```
bff/public-buckets/
├── companies/                  # 企業ロゴ
├── logs/                       # ログファイル置き場
│   └── .gitignore              # ログファイルの Git 除外設定
├── upload-company-logos.sh     # 企業ロゴの一括アップロードスクリプト
├── company-logos-gallery.html  # 企業ロゴギャラリー（本番・ステージング対応）
├── RCLONE_SETUP.md             # Rclone 設定手順書
└── README.md                   # このファイル
```

## 🚀 セットアップ

### 前提条件

- **Rclone**: インストール済み（`mise` で管理）
- **Cloudflare R2**: アカウント情報とアクセスキー

詳細なセットアップ手順は `RCLONE_SETUP.md` を参照してください。

## 📁 使用方法

### 企業ロゴの一括アップロード

```bash
# プロジェクトルートから実行
./bff/public-buckets/upload-company-logos.sh

# または、スクリプトディレクトリから実行
cd bff/public-buckets
./upload-company-logos.sh
```

**特徴:**

- ✅ **バケット選択機能**: ステージング・本番環境を選択可能
- ✅ `companies` ディレクトリ配下の全ファイルを自動検出・アップロード
- 📊 リアルタイム進捗表示
- 🎨 色付き出力で見やすい表示
- 📝 詳細なログファイル生成
- ⚡ エラーハンドリングと前提条件チェック
- 🔍 サポート形式: WebP, PNG, JPG, JPEG
- 🚀 **Rclone 使用**: 高速で信頼性の高いアップロード
- 📊 **統計情報**: ファイル数、所要時間、成功率

### 企業ロゴのギャラリー表示

```bash
# HTML ファイルをブラウザで開く
open company-logos-gallery.html
# または
# ブラウザで直接ファイルを開く
```

**特徴:**

- 🖼️ `companies` ディレクトリ配下の全ファイルを美しく表示
- 📱 レスポンシブデザイン（モバイル対応）
- 📊 統計情報表示（総ファイル数、読み込み済み、エラー数）
- 🎯 エラーハンドリングと成功メッセージ
- 🔄 動的ファイル読み込み（R2 バケットからリアルタイム取得）
- 🗂️ **タブ切り替え機能**: 本番・ステージング環境を簡単に切り替え
- 🎨 **美しい UI**: グラデーション背景、カードレイアウト、ホバーエフェクト

## 📝 ログ管理

### ログファイル

- **場所**: `logs/` ディレクトリ
- **形式**: `upload-company-logos-YYYYMMDD-HHMMSS.log`
- **内容**: アップロード詳細、エラー情報、統計データ
- **保持**: Git から除外（機密情報保護）

### ログの内容例

```log
=============================================================================
FlutterKaigi 2025 ファイル一括アップロードログ
=============================================================================
開始時刻: 2025-08-23 17:30:00
プロジェクトルート: /path/to/project
選択されたバケット: 2025-public-staging
ソースディレクトリ: /path/to/companies
Rclone リモート: r2
=============================================================================
```
